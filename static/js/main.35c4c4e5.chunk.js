(this["webpackJsonpinput-schema-editor-react"]=this["webpackJsonpinput-schema-editor-react"]||[]).push([[0],{163:function(e,t,a){e.exports=a(325)},168:function(e,t,a){},325:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(4),l=a.n(i),o=(a(168),a(26)),s=a(27),c=a(29),p=a(28),u=a(30),d=a(63),m=a(120),y=a.n(m),h=a(145),f=a(73),b=a(19),g=a(49),v=a(33),O=a(327),j=a(146),E=a.n(j),k=a(98),C=a(147),q=a.n(C),x=a(148),S=a.n(x),P=(a(39),function(e){return r.a.createElement(S.a,{src:e.src,name:!1,enableClipboard:!1,displayObjectSize:!1,theme:"pop"})}),I=a(330),N=a(328),V=a(333),w=[{name:"JSON",required:!0}],D=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i))))._getField=function(e){var t=a.props.form.getFieldDecorator;return r.a.createElement(N.a.Item,{key:e.name,label:e.name},t(e.name,{rules:[{required:e.required,message:"Please input your ".concat(e.name,"!")}],initialValue:a.props[e.name]})(r.a.createElement(V.a.TextArea,{placeholder:e.name,name:e.name})))},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(N.a,{layout:"vertical"},w.map(this._getField)))}}]),t}(r.a.Component),T=N.a.create({name:"schema-importer-form"})(D),_=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(p.a)(t).call(this,e))).handleOk=a.handleOk.bind(Object(b.a)(a)),a.closeModal=a.closeModal.bind(Object(b.a)(a)),a.openModal=a.openModal.bind(Object(b.a)(a)),a.state={visible:!1,message:null},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"handleOk",value:function(){this.setState({visible:!1,message:null})}},{key:"closeModal",value:function(){this.handleOk()}},{key:"openModal",value:function(){this.setState({visible:!0,message:null})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(g.a,{onClick:this.openModal,icon:"cloud-download"}," IMPORT SCHEMA"),r.a.createElement(I.a,{title:"Import existing input schema",visible:this.state.visible,onOk:this.handleOk,onCancel:this.closeModal,footer:[r.a.createElement(g.a,{key:"back",onClick:this.closeModal},"Back"),r.a.createElement(g.a,{key:"submit",type:"primary",onClick:function(){var t=e.formRef.props.form;t.validateFields((function(a,n){if(!a)try{e.props.handleImport(n.JSON),t.resetFields(),e.closeModal()}catch(r){e.setState({message:r.message})}}))}},"Save")]},r.a.createElement(T,{wrappedComponentRef:function(t){e.formRef=t}}),this.state.message&&r.a.createElement(O.a.Text,{type:"danger"}," ",this.state.message)))}}]),t}(r.a.Component),M={general:{fields:[{name:"keyName",type:"string",required:!0},{name:"title",type:"string",required:!0,props:{className:"title"}},{name:"type",values:["string","integer","boolean","array","object"],type:"enum",required:!0},{name:"description",type:"string",required:!0},{name:"default",type:"type"},{name:"sectionCaption",type:"string"},{name:"sectionDescription",type:"string"},{name:"required",type:"boolean",required:!0}]},string:{fields:[{name:"editor",values:["textfield","json","textarea","javascript","select","hidden"],required:!0,type:"enum"},{name:"prefill",type:"type"},{name:"pattern",type:"string"},{name:"minLength",type:"integer"},{name:"maxLength",type:"integer"},{name:"enum",type:"array"},{name:"enumTitles",type:"array"},{name:"nullable",type:"boolean"}]},integer:{fields:[{name:"editor",values:["number","hidden"],type:"enum"},{name:"prefill",type:"type"},{name:"maximum",type:"integer"},{name:"minimum",type:"integer"},{name:"unit",type:"string"},{name:"nullable",type:"boolean"}]},boolean:{fields:[{name:"editor",values:["checkbox","hidden"],type:"enum"},{name:"groupCaption",type:"string"},{name:"groupDescription",type:"string"},{name:"nullable",type:"boolean"}]},object:{fields:[{name:"editor",values:["json","proxy","hidden"],type:"enum",required:!0},{name:"prefill",type:"type"},{name:"patternKey",type:"string"},{name:"patternValue",type:"string"},{name:"maxProperties",type:"integer"},{name:"minProperties",type:"integer"},{name:"nullable",type:"boolean"}]},array:{fields:[{name:"editor",values:["json","requestListSources","pseudoUrls","keyValue","stringList","hidden"],type:"enum",required:!0},{name:"prefill",type:"type"},{name:"placeholderKey",type:"string"},{name:"placeholderValue",type:"string"},{name:"patternKey",type:"string"},{name:"patternValue",type:"string"},{name:"maxItems",type:"integer"},{name:"minItems",type:"integer"},{name:"uniqueItems",type:"boolean"},{name:"nullable",type:"boolean"}]}},J=a(326),F=function(e){return r.a.createElement(J.a,{title:e.property.keyName,size:"small",style:{height:"100%",border:"1px solid #1890ff"}},r.a.createElement("div",{style:{height:"100%",marginBottom:"12px",display:"flex",flexDirection:"column",alignItems:"flex-start"}},Object.entries(e.property).map((function(e){var t=Object(f.a)(e,2),a=t[0],n=t[1];if("title"===a||"type"===a||"editor"===a)return r.a.createElement("div",null,a,": ",n)}))),r.a.createElement("div",{style:{height:"100%",display:"flex",flexDirection:"row",alignItems:"flex-start"}},r.a.createElement(g.a,{onClick:function(){return e.handleEdit(e.propertyIndex)},type:"primary",style:{marginRight:"16px"},icon:"edit",block:!0}," EDIT"),r.a.createElement(g.a,{onClick:function(){return e.handleDelete(e.propertyIndex)},type:"danger",icon:"delete",block:!0}," DELETE")))},R=a(334),A=a(125),K=a(331),U=a(329),B=a(332);function L(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var W=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(p.a)(t).call(this,e)))._getField=function(e,t){var n=a.props.form.getFieldDecorator,i=Object.assign({},e),l={rules:[{required:i.required,message:"Please input your ".concat(i.name,"!")}],initialValue:a.state[i.name]};return"type"===i.type&&(i.type=a.state.type),"boolean"===i.type&&(l.valuePropName="checked",i.required&&(l.rules=[{required:!1}])),"object"!==i.type&&"array"!==i.type||(l.initialValue=JSON.stringify(a.state[i.name],null,2)),"enum"===i.type&&(l.getValueProps=function(e){return i.values.includes(e)?{value:e}:i.values.includes(a.state[i.name])?{value:a.state[i.name]}:void a.setPropertyValue({value:i.values[0],key:i.name})}),r.a.createElement(N.a.Item,Object.assign({key:i.name,label:i.name},i.props),n(i.name,l)(a._getInputField(i)))},a._getInputField=function(e){var t,n={placeholder:e.name,onChange:function(e){return a.setPropertyValue(e)},name:e.name};switch(e.type){case"string":t=r.a.createElement(V.a,n);break;case"integer":t=r.a.createElement(K.a,Object.assign({},n,{onChange:function(t){return a.setPropertyValue({key:e.name,value:t})}}));break;case"enum":t=r.a.createElement(U.a,Object.assign({},n,{onChange:function(t){return a.setPropertyValue({key:e.name,value:t})}}),e.values.map((function(e){return r.a.createElement(U.a.Option,{value:e,key:e},e)})));break;case"boolean":t=r.a.createElement(B.a,Object.assign({},n,{onChange:function(t){return a.setPropertyValue({key:e.name,value:t.target.checked})}}));break;case"object":case"array":t=r.a.createElement(V.a.TextArea,n);break;default:t=r.a.createElement("p",null,"null")}return t},a.setPropertyValue=a.setPropertyValue.bind(Object(b.a)(a)),a.state=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?L(a,!0).forEach((function(t){Object(A.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):L(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e.property),a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"setPropertyValue",value:function(e){var t,a;e.persist?(e.persist(),a=e.target.value,t=e.target.name):(t=e.key,a=e.value),this.setState(Object(A.a)({},t,a))}},{key:"_requiredFirst",value:function(e,t){return e.required===t.required?0:e.required?-1:1}},{key:"render",value:function(){var e=this,t=M.general.fields.concat(M[this.state.type].fields);return t=t.sort(this._requiredFirst),r.a.createElement(N.a,{labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}},t.map((function(t){return e._getField(t,e.state.type)})))}}]),t}(r.a.Component),Y=N.a.create({name:"property-form"})(W),z=function(e){var t,a=e.property.title||"CREATING NEW PROPERTY";return r.a.createElement(I.a,{title:a,visible:e.visible,onOk:e.handleOk,onCancel:e.closeModal,style:{top:20},footer:[r.a.createElement(g.a,{key:"back",onClick:e.closeModal},"Back"),r.a.createElement(g.a,{key:"submit",type:"primary",onClick:function(){var a=t.props.form;a.validateFields((function(n,r){if(!n){var i,l=function(){r.uniqueKey=e.property.uniqueKey,r.editor=t.state.editor,i(r,e.propertyIndex),a.resetFields(),e.closeModal()};e.isEdit?(i=e.handleUpdate,l()):(i=e.handleSave,e.properties.find((function(e){return e.keyName===r.keyName}))?R.a.error('Property with keyName "'.concat(r.keyName,'" already exist')):l())}}))}},"Save")]},e.visible&&r.a.createElement(Y,{property:e.property,isRequired:e.isRequired,wrappedComponentRef:function(e){t=e}}))},G=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return r.a.createElement("div",{className:"metadata"},r.a.createElement(O.a.Title,{level:3},"Metadata"),r.a.createElement(N.a,Object.assign({layout:"vertical"},{labelCol:{xs:{span:6},sm:{span:6}},wrapperCol:{xs:{span:12},sm:{span:12}}}),r.a.createElement(N.a.Item,{key:"title",label:"Title"},e("title",{rules:[{required:!0,message:'Please input "title"!'}],initialValue:this.props.title})(r.a.createElement(V.a,{placeholder:"title",name:"title",onChange:this.props.setStaticValue}))),r.a.createElement(N.a.Item,{key:"description",label:"Description"},e("description",{rules:[{required:!1,message:'Please input "description"!'}],initialValue:this.props.description})(r.a.createElement(V.a.TextArea,{placeholder:"description",name:"description",onChange:this.props.setStaticValue})))))}}]),t}(r.a.Component),H=N.a.create({name:"general-form"})(G),Q=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(p.a)(t).call(this,e)))._ensureValidStructure=function(e){var t=M.general.fields.concat(M[e.type].fields).concat([{name:"uniqueKey"}]),a={};return t.forEach((function(t){var n=t.type,r=t.name,i=e[r];("object"===n||"array"===n)&&i&&(i=JSON.parse(e[r])),(i||"boolean"===typeof e[r])&&(a[r]=i)})),a},a._createProperty=function(){a.setState((function(e){var t=Object.assign({},e.modal);return t.visible=!0,{modal:t}}))},a._mockEmptyProperty=function(){return{title:"Country",type:"string",description:"Select your country",editor:"select",enum:["us","de","fr"],enumTitles:["USA","Germany","France"],keyName:"country",uniqueKey:Object(k.generate)()}},a.setStaticValue=a.setStaticValue.bind(Object(b.a)(a)),a._getJson=a._getJson.bind(Object(b.a)(a)),a.handleJsonChange=a.handleJsonChange.bind(Object(b.a)(a)),a.closeModal=a.closeModal.bind(Object(b.a)(a)),a.handleSave=a.handleSave.bind(Object(b.a)(a)),a.handleEdit=a.handleEdit.bind(Object(b.a)(a)),a.handleDelete=a.handleDelete.bind(Object(b.a)(a)),a.handleUpdate=a.handleUpdate.bind(Object(b.a)(a)),a.copyToClipboard=a.copyToClipboard.bind(Object(b.a)(a)),a.handleImport=a.handleImport.bind(Object(b.a)(a)),a.downloadFile=a.downloadFile.bind(Object(b.a)(a)),a.state={config:{title:"Actor input schema",description:"This is actor input schema",schemaVersion:1,type:"object",properties:[a._mockEmptyProperty()],required:[]},modal:{visible:!1,propertyIndex:null},isEdit:!1},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"setStaticValue",value:function(e){var t,a;e.persist?(e.persist(),a=e.target.value,t=e.target.name):(t=e.key,a=e.value),this.setState((function(e){var n=Object.assign({},e.config);return n[t]=a,{config:n}}))}},{key:"handleSave",value:function(e){var t=this,a=this._ensureValidStructure(e);this.setState((function(e){var n=Object.assign({},e.config);return n.required=t._getUpdatedRequired(e,a),n.properties=n.properties.concat([a]),{config:n}}))}},{key:"_getUpdatedRequired",value:function(e,t){var a=e.config.required.concat([]),n=a.find((function(e){return e===t.keyName}));return t.required&&!n?a.concat([t.keyName]):(a.splice(n,1),a)}},{key:"handleDelete",value:function(e){this.setState((function(t){var a=Object.assign({},t.config);return a.properties.splice(e,1),{config:a}}))}},{key:"handleUpdate",value:function(e,t){var a=this,n=this._ensureValidStructure(e);this.setState((function(e){var r=Object.assign({},e.config);return r.properties[t]=Object.assign({},r.properties[t],n),r.required=a._getUpdatedRequired(e,n),{config:r,isEdit:!1}}))}},{key:"closeModal",value:function(){this.setState((function(e){var t=Object.assign({},e.modal);return t.visible=!1,t.propertyIndex=-1,{modal:t,isEdit:!1}}))}},{key:"handleEdit",value:function(e){this.setState({modal:{visible:!0,propertyIndex:e},isEdit:!0})}},{key:"handleJsonChange",value:function(e){this.setState((function(t){var a=t.config,n=Object.assign({},e.properties);delete e.properties,Object.entries(e).forEach((function(e){var t=Object(f.a)(e,2),n=t[0],r=t[1];a[n]=r}));var r=Object.entries(n).map((function(e){var t=Object(f.a)(e,2),n=t[0],r=t[1],i=Object.assign({},r);return i.keyName=n,i.uniqueKey=Object(k.generate)(),i.required=a.required.includes(n),i}));return a.properties=r,{config:a}}))}},{key:"handleImport",value:function(e){this.handleJsonChange(JSON.parse(e))}},{key:"copyToClipboard",value:function(){var e=Object(h.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E()(JSON.stringify(this._getJson(),null,2));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getJson",value:function(){var e=this.state.config,t={title:e.title,description:e.description,type:e.type,schemaVersion:e.schemaVersion,properties:{},required:e.required};return e.properties.forEach((function(e){var a=Object.assign({},e),n=a.keyName;delete a.keyName,delete a.uniqueKey,delete a.required,t.properties[n]=a})),t}},{key:"downloadFile",value:function(){q()(JSON.stringify(this._getJson(),null,2),"INPUT_SCHEMA.json")}},{key:"render",value:function(){var e=this,t=this.state,a=t.config,n=t.modal,i=t.isEdit,l=a.properties[n.propertyIndex]||{uniqueKey:Object(k.generate)(),type:"string"},o=function(t){return r.a.createElement(g.a,Object.assign({type:"primary",onClick:e._createProperty,style:{marginBottom:"16px"},icon:"plus-circle",block:!0},t),"ADD NEW PROPERTY")};return r.a.createElement("div",null,r.a.createElement(d.a,{gutter:16},r.a.createElement(v.a,{span:13,key:"config",style:{padding:"16px 20px 16px 30px"},className:"scrollable"},r.a.createElement(O.a.Title,{level:2},"Configure your input schema"),r.a.createElement(H,Object.assign({},a,{setStaticValue:this.setStaticValue})),r.a.createElement("div",{className:"properties"},r.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-between"}},r.a.createElement(O.a.Title,{level:3},"Properties"),r.a.createElement(o,null)),r.a.createElement(d.a,{type:"flex",gutter:[16,16]},a.properties.map((function(t,a){var n=t.uniqueKey;return r.a.createElement(v.a,{span:12,key:t.uniqueKey},r.a.createElement(F,{property:t,propertyIndex:a,handleEdit:e.handleEdit,handleDelete:e.handleDelete,key:n}))}))),this.state.config.properties.length>=3&&r.a.createElement(o,{style:{marginTop:"16px"}}))),r.a.createElement(v.a,{span:11,key:"viewer",className:"scrollable json"},r.a.createElement(O.a.Title,{level:2,className:"white"},"Input Schema JSON"),r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"16px"}},r.a.createElement(g.a,{onClick:this.copyToClipboard,type:"primary",icon:"copy"}," COPY TO CLIPBOARD"),r.a.createElement(g.a,{onClick:this.downloadFile,icon:"cloud-download"}," DOWNLOAD"),r.a.createElement(_,{handleImport:this.handleImport})),r.a.createElement("div",null,r.a.createElement(P,{src:this._getJson(),handleChange:this.handleJsonChange})))),r.a.createElement(z,{visible:n.visible,property:l,isRequired:a.required.find((function(e){return e===l.keyName})),closeModal:this.closeModal,handleSave:this.handleSave,propertyIndex:n.propertyIndex,properties:a.properties,isEdit:i,handleUpdate:this.handleUpdate}))}}]),t}(r.a.Component),X=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(d.a,null,r.a.createElement("header",{className:"App-header"},"Input schema editor")),r.a.createElement(Q,null))}}]),t}(r.a.Component);l.a.render(r.a.createElement(X,null),document.getElementById("root"))},39:function(e,t,a){}},[[163,1,2]]]);
//# sourceMappingURL=main.35c4c4e5.chunk.js.map